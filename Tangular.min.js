!function(e){if(!e.Tangular){var t={},c=t.helpers={};t.version='v4.0.1',t.cache={},t.debug=!1,e.Ta=e.Tangular=t,e.Thelpers=c;var a={null:!0,undefined:!0,true:!0,false:!0,Object:1,String:1,Number:1,Boolean:1,Date:1,Array:1,window:1,global:1,arguments:1,eval:1,Function:1,function:1,var:1,let:1,const:1,delete:1},n=/\{\{.*?\}\}/g,b=/\{\{|\}\}/g,r=/[<>&"]/g,i=/\n$/g;t.toArray=function(e){for(var r=Object.keys(e),t=[],n=0,i=r.length;n<i;n++)t.push({key:r[n],value:e[r[n]]});return t},l.prototype.compile=function(e){var p,m=this,d=0,h=0,g=[];m.template=e,m.variables={},m.commands=[],m.builder=e.replace(n,function(e){var r,t=e.replace(b,'').trim(),n=null,i=null,l=!1,s=!1,a=!0;if('fi'===t)d--;else if('end'===t)h--,g.pop();else if('if '===t.substring(0,3)){if(d++,(n=v(t.substring(3),g)).length)for(var u=0;u<n.length;u++){var o=n[u];m.variables[o]?m.variables[o]++:m.variables[o]=1}else n=null;a=l=!0}else if('foreach '===t.substring(0,8))h++,p=t.substring(8).split(' '),g.push(p[0].trim()),-1!==(r=p[2].indexOf('.'))&&(p[2]=p[2].substring(0,r)),n=p[2].trim(),n=-1===g.indexOf(n)?(m.variables[n]?m.variables[n]++:m.variables[n]=1,[n]):null,s=!0;else if('else if '===t.substring(0,8)){if((n=v(t.substring(8),g)).length)for(u=0;u<n.length;u++){o=n[u];m.variables[o]?m.variables[o]++:m.variables[o]=1}else n=null;l=!0}else if('continue'!==t&&'break'!==t&&'else'!==t){n=v(t);for(u=0;u<n.length;u++){var c=n[u];m.variables[c]?m.variables[c]++:m.variables[c]=1}if(n.length||(n=null),-1===t.indexOf('|')&&(t+=' | encode'),t=(i=t.split('|'))[0],(i=i.slice(1)).length)for(u=0;u<i.length;u++){var f=i[u].trim();f=-1===(r=f.indexOf('('))?'Thelpers.$execute(model,\''+f+'\',)':'Thelpers.$execute(model,\''+f.substring(0,r)+'\',,'+f.substring(r+1),i[u]=f}else i=null;t=m.safe(t.trim()||'model'),a=!1}return m.commands.push({index:m.commands.length,cmd:t,ifcount:d,loopcount:h,variable:n,helpers:i,isloop:s,isif:l,iscode:a}),m.split}).split(m.split);for(var r=0;r<m.builder.length;r++){var t=m.builder[r];m.builder[r]=t?t.replace(i,''):t}return m.make()},l.prototype.safe=function(e){for(var r=e.split('.'),t=[],n=1;n<r.length;n++){var i=r.slice(0,n).join('.');t.push(i+'==null?\'\':')}return t.join('')+r.join('.')},l.prototype.make=function(){for(var e=this,r=['var $output=$text[0];var $tmp;var $index=0;'],t=0,n=e.commands.length;t<n;t++){var i,l=e.commands[t];if(t&&r.push('$output+=$text['+t+'];'),l.iscode)if(l.isloop){var s='$i'+Math.random().toString(16).substring(3,6),a=s+'a';i=l.cmd.substring(l.cmd.lastIndexOf(' in ')+4).trim(),i=a+'='+e.safe(i)+';if(!('+a+' instanceof Array)){if('+a+'&&typeof('+a+')===\'object\')'+a+'=Tangular.toArray('+a+')}if('+a+' instanceof Array&&'+a+'.length){for(var '+s+'=0,'+s+'l='+a+'.length;'+s+'<'+s+'l;'+s+'++){$index='+s+';var '+l.cmd.split(' ')[1]+'='+a+'['+s+'];',r.push(i)}else if(l.isif)'else if '===l.cmd.substring(0,8)?r.push('}'+l.cmd.substring(0,8).trim()+'('+l.cmd.substring(8).trim()+'){'):r.push(l.cmd.substring(0,3).trim()+'('+l.cmd.substring(3).trim()+'){');else switch(l.cmd){case'else':r.push('}else{');break;case'end':r.push('}}');break;case'fi':r.push('}');break;case'break':r.push('break;');break;case'continue':r.push('continue;')}else if(l.helpers){for(var u='',o=0;o<l.helpers.length;o++){var c=l.helpers[o];u=0===o?c.replace('',l.cmd.trim()).trim():c.replace('',u.trim())}r.push('$tmp='+u+';if($tmp!=null)$output+=$tmp;')}else r.push('if('+l.cmd+'!=null)$output+='+l.cmd+';')}r.push((n?'$output+=$text['+n+'];':'')+'return $output.charAt(0) === \'\\n\'?$output.substring(1):$output;'),delete e.variables.$;var f=Object.keys(e.variables),p=['$ || {}','model'];for(t=0;t<f.length;t++)p.push('model.'+f[t]);var m='var tangular=function($,model'+(f.length?','+f.join(','):'')+'){'+r.join('')+'};return function(model,$){try{return tangular('+p.join(',')+')}catch(e){console.error(\'Tangular error:\',e + \'\',$template)}}';return new Function('$text','$template',m)(e.builder,e.template)},c.$execute=function(e,r,t,n,i,l,s,a,u,o){return null==c[r]?(console&&console.warn('Tangular: missing helper','"'+r+'"'),t):c[r].call(e,t,n,i,l,s,a,u,o)},c.encode=function(e){return null==e?'':(e+'').replace(r,function(e){switch(e){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'"':return'&quot;'}return e})},c.raw=function(e){return e},t.render=function(e,r,t){return(new l).compile(e)(null==r?{}:r,t)},t.compile=function(e){return(new l).compile(e)},t.register=function(e,r){return c[e]=r,t}}function v(e,r){for(var t='',n=[],i=0,l=0;l<e.length;l++){var s=e.charCodeAt(l);if(!i){if(t&&47<s&&s<58||64<s&&s<91||96<s&&s<123||95===s||36===s){t+=e.charAt(l);continue}t&&(a[t]||-1!==n.indexOf(t)||r&&-1!==r.indexOf(t)||n.push(t),t='')}46===s||124===s?i=s:46!==i&&124!==i||40!==s?96!==s&&34!==s&&39!==s||(i=s===i?0:s):i=0}return!t||a[t]||-1!==n.indexOf(t)||r&&-1!==r.indexOf(t)||n.push(t),n}function l(){this.commands,this.variables,this.builder,this.split='\0'}}('undefined'==typeof window?global:window);