!function(e){if(!e.Tangular){var n={},c=n.helpers={};n.version='v4.0.0',n.cache={},n.debug=!1,e.Ta=e.Tangular=n,e.Thelpers=c;var a={null:!0,undefined:!0,true:!0,false:!0,Object:1,String:1,Number:1,Boolean:1,Date:1,Array:1,window:1,global:1,arguments:1,eval:1,Function:1,function:1,var:1,let:1,const:1,delete:1},t=/\{\{.*?\}\}/g,g=/\{\{|\}\}/g,r=/[<>&"]/g,i=/\n$/g;n.toArray=function(e){for(var r=Object.keys(e),n=[],t=0,i=r.length;t<i;t++)n.push({key:r[t],value:e[r[t]]});return n},s.prototype.compile=function(e){var p,h=this,d=0,m=0,b=[];h.variables={},h.commands=[],h.builder=e.replace(t,function(e){var r,n=e.replace(g,'').trim(),t=null,i=null,s=!1,l=!1,a=!0;if('fi'===n)d--;else if('end'===n)m--,b.pop();else if('if '===n.substring(0,3)){if(d++,(t=v(n.substring(3),b)).length)for(var u=0;u<t.length;u++){var o=t[u];h.variables[o]?h.variables[o]++:h.variables[o]=1}else t=null;a=s=!0}else if('foreach '===n.substring(0,8))m++,p=n.substring(8).split(' '),b.push(p[0].trim()),-1!==(r=p[2].indexOf('.'))&&(p[2]=p[2].substring(0,r)),t=p[2].trim(),t=-1===b.indexOf(t)?(h.variables[t]?h.variables[t]++:h.variables[t]=1,[t]):null,l=!0;else if('else if '===n.substring(0,8)){if((t=v(n.substring(8),b)).length)for(u=0;u<t.length;u++){o=t[u];h.variables[o]?h.variables[o]++:h.variables[o]=1}else t=null;s=!0}else if('continue'!==n&&'break'!==n&&'else'!==n){t=v(n);for(u=0;u<t.length;u++){var c=t[u];h.variables[c]?h.variables[c]++:h.variables[c]=1}if(t.length||(t=null),-1===n.indexOf('|')&&(n+=' | encode'),n=(i=n.split('|'))[0],(i=i.slice(1)).length)for(u=0;u<i.length;u++){var f=i[u].trim();f=-1===(r=f.indexOf('('))?'Thelpers.$execute(model,\''+f+'\',)':'Thelpers.$execute(model,\''+f.substring(0,r)+'\',,'+f.substring(r+1),i[u]=f}else i=null;n=h.safe(n.trim()||'model'),a=!1}return h.commands.push({index:h.commands.length,cmd:n,ifcount:d,loopcount:m,variable:t,helpers:i,isloop:l,isif:s,iscode:a}),h.split}).split(h.split);for(var r=0;r<h.builder.length;r++){var n=h.builder[r];h.builder[r]=n?n.replace(i,''):n}return h.make()},s.prototype.safe=function(e){for(var r=e.split('.'),n=[],t=1;t<r.length;t++){var i=r.slice(0,t).join('.');n.push(i+'==null?\'\':')}return n.join('')+r.join('.')},s.prototype.make=function(){for(var e=this,r=['var $output=$text[0];var $tmp;var $index=0;'],n=0,t=e.commands.length;n<t;n++){var i,s=e.commands[n];if(n&&r.push('$output+=$text['+n+'];'),s.iscode)if(s.isloop){var l='$i'+Math.random().toString(16).substring(3,6),a=l+'a';i=s.cmd.substring(s.cmd.lastIndexOf(' in ')+4).trim(),i=a+'='+e.safe(i)+';if(!('+a+' instanceof Array)){if('+a+'&&typeof('+a+')===\'object\')'+a+'=Tangular.toArray('+a+')}if('+a+' instanceof Array&&'+a+'.length){for(var '+l+'=0,'+l+'l='+a+'.length;'+l+'<'+l+'l;'+l+'++){$index='+l+';var '+s.cmd.split(' ')[1]+'='+a+'['+l+'];',r.push(i)}else if(s.isif)'else if '===s.cmd.substring(0,8)?r.push('}'+s.cmd.substring(0,8).trim()+'('+s.cmd.substring(8).trim()+'){'):r.push(s.cmd.substring(0,3).trim()+'('+s.cmd.substring(3).trim()+'){');else switch(s.cmd){case'else':r.push('}else{');break;case'end':r.push('}}');break;case'fi':r.push('}');break;case'break':r.push('break;');break;case'continue':r.push('continue;')}else if(s.helpers){for(var u='',o=0;o<s.helpers.length;o++){var c=s.helpers[o];u=0===o?c.replace('',s.cmd.trim()).trim():c.replace('',u.trim())}r.push('$tmp='+u+';if($tmp!=null)$output+=$tmp;')}else r.push('if('+s.cmd+'!=null)$output+='+s.cmd+';')}r.push((t?'$output+=$text['+t+'];':'')+'return $output.charAt(0) === \'\\n\'?$output.substring(1):$output;'),delete e.variables.$;var f=Object.keys(e.variables),p=['$ || {}','model'];for(n=0;n<f.length;n++)p.push('model.'+f[n]);var h='var tangular=function($,model'+(f.length?','+f.join(','):'')+'){'+r.join('')+'};return function(model,$){return tangular('+p.join(',')+');}';return new Function('$text',h)(e.builder)},c.$execute=function(e,r,n,t,i,s,l,a,u,o){return null==c[r]?(console&&console.warn('Tangular: missing helper','"'+r+'"'),n):c[r].call(e,n,t,i,s,l,a,u,o)},c.encode=function(e){return null==e?'':(e+'').replace(r,function(e){switch(e){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'"':return'&quot;'}return e})},c.raw=function(e){return e},n.render=function(e,r,n){return(new s).compile(e)(null==r?{}:r,n)},n.compile=function(e){return(new s).compile(e)},n.register=function(e,r){return c[e]=r,n}}function v(e,r){for(var n='',t=[],i=0,s=0;s<e.length;s++){var l=e.charCodeAt(s);if(!i){if(n&&47<l&&l<58||64<l&&l<91||96<l&&l<123||95===l||36===l){n+=e.charAt(s);continue}n&&(a[n]||-1!==t.indexOf(n)||r&&-1!==r.indexOf(n)||t.push(n),n='')}46===l||124===l?i=l:46!==i&&124!==i||40!==l?96!==l&&34!==l&&39!==l||(i=l===i?0:l):i=0}return!n||a[n]||-1!==t.indexOf(n)||r&&-1!==r.indexOf(n)||t.push(n),t}function s(){this.commands,this.variables,this.builder,this.split='\0'}}(window);